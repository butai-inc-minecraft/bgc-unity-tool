# TikTok Live 連携ツール 開発タスク

## 現状の課題

サンプルコード「TikTokLiveExample.cs」を参考に、より使いやすく、シンプルな TikTok Live 連携ライブラリを開発する必要があります。開発者が簡単に利用できる API を提供し、ゲーム連携を容易にすることが主な目標です。

## 実装済み機能

### 1. 基本的な接続機能

- WebSocket を使用した TikTok Live サーバーへの接続
- API Key による認証システム
- 接続状態の表示と管理
- エラーハンドリングと表示

### 2. メッセージ処理

- **いいねメッセージ**の受信と処理

  - いいね数のカウントと表示
  - 100 いいねごとの閾値達成通知
  - 複数のいいねが一度に送信される場合の処理
  - ユーザーごとのいいね数追跡

- **チャットメッセージ**の受信と処理

  - チャットメッセージの表示
  - 特定キーワードへの反応機能
  - 最新メッセージの管理

- **ギフトメッセージ**の受信と処理

  - ギフト情報の取得と表示

- **視聴者情報**の受信と処理
  - 視聴者数の取得と表示
  - 参加通知の表示

### 3. UI 機能

- 接続状態の視覚的表示（色分け）
- エラーメッセージの表示
- チャットメッセージの表示
- いいね達成通知の表示
- スクロール可能なメッセージ履歴

### 4. セキュリティ対策

- API Key の安全な管理
- `.gitignore`への自動追加機能
- サンプル設定ファイルの提供

## 今後のロードマップ

### 短期目標（1-2 週間）

- [ ] **シンプルで使いやすい API の設計**

  - イベント駆動型のインターフェース
  - 明確なドキュメント
  - サンプルコード

- [ ] **TikTokLiveExample のような使いやすいインターフェースのサンプル提供**

  - スクロール可能なメッセージ表示領域
  - ユーザーアイコンの表示
  - メッセージタイプ別の表示領域分け

- [ ] **ゲーム連携のための簡易インターフェース**

  - いいね、ギフト、チャットイベントの簡単な登録方法
  - カスタムイベントハンドラーの実装サポート
  - 開発者が独自の処理を追加しやすい設計

- [ ] **メッセージフィルタリング機能**の実装

  - 特定ユーザーのメッセージをフィルタリング
  - NG ワードの設定と自動フィルタリング

- [ ] **コマンド機能**の実装
  - チャットからのコマンド受付（例: !help, !info）
  - コマンドに応じたアクション実行のためのフレームワーク

### 中期目標（1-2 ヶ月）

- [ ] **拡張性の高いイベントシステム**

  - カスタムイベントの定義と登録
  - イベントの優先順位付け
  - 条件付きイベントトリガー

- [ ] **プレハブシステムのサンプル提供**

  - ギフト表示用プレハブ
  - メッセージ表示用プレハブ
  - 開発者がカスタマイズしやすいテンプレート

- [ ] **統計機能**の実装

  - セッション中のいいね数、チャット数などの統計
  - データ分析のための API
  - データのエクスポート機能

- [ ] **マルチプラットフォーム対応**
  - モバイル対応（iOS/Android）
  - WebGL 対応

### 長期目標（3-6 ヶ月）

- [ ] **AI 機能のためのインターフェース**

  - チャットの自動応答のためのフック
  - 感情分析のためのデータ提供
  - 開発者が独自の AI 処理を追加しやすい設計

- [ ] **他プラットフォームとの連携**

  - YouTube Live 連携
  - Twitch 連携
  - Twitter 連携

- [ ] **プラグインシステム**の実装
  - サードパーティ開発者向け API
  - プラグイン管理システム

## 優先度の高いタスク

1. シンプルで使いやすい API の設計
2. イベント駆動型のインターフェース実装
3. 明確なドキュメントとサンプルコードの提供
4. メッセージフィルタリング機能
5. コマンド機能のフレームワーク

## 既知の問題点

- 長時間接続時の安定性確保
- 大量メッセージ受信時のパフォーマンス最適化
- 接続が切れた場合の自動再接続機能の改善
- 文字化けの解消（日本語対応の強化）

## 実装すべき具体的なコンポーネント

### 1. TikTokLiveManager

- シングルトンパターンによる一元管理
- イベント駆動型の設計
- 各種イベントのデリゲート定義
- 簡潔な API

### 2. イベントシステム

- イベントの定義と登録のためのインターフェース
- イベントハンドラーの登録と解除
- イベントの優先順位付け
- 条件付きイベントトリガー

### 3. メッセージ処理システム

- メッセージの受信と解析
- メッセージタイプの判別
- メッセージのフィルタリング
- メッセージの配信

### 4. ユーティリティ

- 画像ロードユーティリティ
- メインスレッド実行ディスパッチャー
- 設定管理システム
- エラーハンドリング

## 開発環境

- Unity 2022.3.x 以上
- C#
- WebSocketSharp
- JSON Utility
- TextMeshPro

## 貢献方法

1. このリポジトリをフォーク
2. 機能追加やバグ修正を実装
3. プルリクエストを送信

## ライセンス

[ライセンス情報を記載]
